<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>home</title>
    <link rel="stylesheet" href="ls_castoms.css">
    <link rel="stylesheet" href="tuning.css">
    <base href="./page">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600" rel="stylesheet">
    <script src="./js/iro.js" charset="utf-8"></script>
</head>

<body>
    <div class="tuning" v-show="active&&selectTun">
        <div style="
        top: -160px;
        left: -29px;    
        width: 10000px;
        height: 10000px;
        position: fixed;
        " v-on:mousedown="mouseClick(true)" v-on:mouseup="mouseClick(false)" v-on:mouseleave="mouseClick(false)" v-on:mousemove="mousemove($event.clientX,$event.clientY);"></div>
        <div class="bg" v-if="active&&selectTun">
            <div class="menu">
                <div class="title">{{selectTun.name?selectTun.name:title}}</div>
                <div v-on:click="back();" style="position: absolute;
    left: 100%;
    top: 0;
    width: 85px;
    height: 65px;
    background: rgba(46, 46, 46, 0.7) url(images/tuning/back.png) no-repeat 0 50%;
    cursor: pointer;"></div>
                <div class="close" @click="exit"></div>
                <div class="list">
                    <ul>
                        <li v-for="(item, i) in getTun" v-on:click="item.submenu?setSelectTun(item,i):selectModIndex(i,(mod==23?0:item.price[i]))" :style="(modIndex==i||sets[mod]==i)?'background: #1f6027;':''">
                            <img :src="'images/tuning/'+(item.img?item.img:'none')+'.png'" :style="item.img?'opacity: 1':'opacity: 0'"><span>{{item.name}}<div class="price">{{item.submenu?'':(item.price?(' - '+(Math.round(item.price[i]/100*vehiclePrice))+'$'):'')}}</div></span>
                        </li>
                    </ul>
                </div>
                <div class="buy" @click="buy" v-if="modIndex!=-2">
                    <div class="btn">Купить</div>
                </div>
            </div>
        </div>
        <div id="demoWheel" v-show="colorPicker" style="
        position: absolute;
        top: 320px;
        right: 103px;"></div>
    </div>
    <script src="../js/jquery-3.2.1.min.js"></script>
    <script src="js/vue.js"></script>
    <script>
    var tuning = new Vue({
        el: ".tuning",
        data: {
            active: false,
            title: "Автотюнинг",
            tuningCheck: [],
            selectTun: {},
            mod: -1,
            colorPicker: false,
            colorValue: '#f00',
            modIndex: -2,
            xold: 0,
            yold: 0,
            sets: {},
            tuningMenu: {
                0: {
                    img: 15,
                    name: "Спойлер",
                    submenu: {},
                    price: { 
                        0: 2,
                        1: 2.2,
                        2: 2.5,
                        3: 2.9,
                        4: 2.9,
                        5: 3,
                        6: 2,
                        7: 5,
                        8: 6,
                        9: 4,
                        10: 3,
                        11: 3,
                        12: 4,
                        13: 4,
                        14: 4,
                        15: 4,
                        16: 4,
                        17: 4,
                        18: 4,
                        19: 4,
                        20: 4,
                        21: 4,
                        22: 4,
                        23: 4,
                        24: 4,
                        25: 4,
                        26: 4,
                        27: 4,
                        28: 4,
                    }
                },
                1: {
                    img: 11,
                    name: "Бамперы",
                    submenu: {
                        1: { name: "Передний бампер", submenu: {},
                            price: { 
                                0: 4,
                                1: 4,
                                2: 4,
                                3: 4,
                                4: 8,
                                5: 3,
                                6: 5,
                                7: 6,
                                8: 8,
                                9: 9,
                                10: 10,
                                11: 6,
                                12: 7,
                            } 
                    },
                        2: { name: "Задний бампер", submenu: {},
                            price: { 
                                0: 4,
                                1: 4,
                                2: 4,
                                3: 4,
                                4: 4,
                                5: 3,
                                6: 3,
                                7: 6,
                                8: 7,
                                9: 5,
                                10: 6,
                                11: 4,
                                12: 6,
                            }  
                        }
                    }
                },
                3: {
                    img: 12,
                    name: "Пороги",
                    submenu: {},
                    price: { 
                                0: 3,
                                1: 3.5,
                                2: 6,
                                3: 5,
                                4: 4,
                                5: 3,
                                6: 3,
                                7: 6,
                                8: 7,
                                9: 5,
                                10: 6,
                                11: 4,
                                12: 6,
                            }  
                },
                4: {
                    img: 10,
                    name: "Глушитель",
                    submenu: {},
                    price: { 
                                0: 2.3,
                                1: 2.5,
                                2: 2.8,
                                3: 3.1,
                                4: 4,
                                5: 3,
                                6: 3,
                                7: 6,
                                8: 7,
                                9: 5,
                                10: 6,
                                11: 4,
                                12: 6,
                                13: 6,
                                14: 6,
                                15: 6,
                                16: 6,
                                17: 6,
                            }  
                },
                5: {
                    img: 10,
                    name: "Салон",
                    submenu: {},
                    price: { 
                                0: 6,
                                1: 6,
                                2: 6,
                                3: 6,
                                4: 6,
                                5: 6,
                                6: 6,
                                7: 6,
                                8: 6,
                                9: 6,
                                10: 6,
                                11: 6,
                                12: 6,
                                13: 6,
                                14: 6,
                                15: 6,
                                16: 6,
                                17: 6,
                                18: 6,
                                19: 6,
                            }  
                },
                6: {
                    img: 10,
                    name: "Решетка",
                    submenu: {},
                    price: { 
                                0: 1.8,
                                1: 2.1,
                                2: 2.4,
                                3: 2.6,
                                4: 4,
                                5: 3,
                                6: 3,
                                7: 6,
                                8: 7,
                                9: 5,
                                10: 6,
                                11: 4,
                                12: 6,
                                13: 6,
                            }  
                },
                7: {
                    img: 10,
                    name: "Капот",
                    submenu: {},
                    price: { 
                                0: 2.5,
                                1: 3.0,
                                2: 6,
                                3: 5,
                                4: 4,
                                5: 3,
                                6: 3,
                                7: 6,
                                8: 7,
                                9: 5,
                                10: 6,
                                11: 4,
                                12: 6,
                                13: 6,
                                14: 6,
                                15: 6,
                                16: 6,
                                17: 6,
                                18: 6,
                                19: 6,
                            }  
                },
                8: {
                    img: 16,
                    name: "Фары",
                    submenu: {},
                    price: { 
                                0: 3,
                                1: 4,
                                2: 6,
                                3: 5,
                                4: 4,
                                5: 3,
                                6: 3,
                                7: 6,
                                8: 7,
                                9: 5,
                                10: 6,
                                11: 4,
                                12: 6,
                            }  
                },
                10: {
                    img: 14,
                    name: "Крыша",
                    submenu: {},
                    price: { 
                                0: 3,
                                1: 4,
                                2: 6,
                                3: 5,
                                4: 4,
                                5: 3,
                                6: 3,
                                7: 6,
                                8: 7,
                                9: 5,
                                10: 6,
                                11: 4,
                                12: 6,
                            }  
                },
                11: {
                    img: 1,
                    name: "Двигатель",
                    submenu: {},
                    price: { 
                                0: 0.9,
                                1: 1.3,
                                2: 1.9,
                                3: 2.4,
                                4: 4,
                                5: 3,
                                6: 3,
                                7: 6,
                                8: 7,
                                9: 5,
                                10: 6,
                                11: 4,
                                12: 6,
                            }  
                },
                12: {
                    img: 4,
                    name: "Тормоза",
                    submenu: {},
                    price: { 
                                0: 0.6,
                                1: 1,
                                2: 2.3,
                                3: 5,
                                4: 4,
                                5: 3,
                                6: 3,
                                7: 6,
                                8: 7,
                                9: 5,
                                10: 6,
                                11: 4,
                                12: 6,
                            }  
                },
                13: {
                    img: 3,
                    name: "Коробка",
                    submenu: {},
                    price: { 
                                0: 1.5,
                                1: 2.1,
                                2: 3,
                                3: 5,
                                4: 4,
                                5: 3,
                                6: 3,
                                7: 6,
                                8: 7,
                                9: 5,
                                10: 6,
                                11: 4,
                                12: 6,
                            }  
                },
                14: {
                    img: 8,
                    name: "Клаксоны",
                    submenu: {},
                    price: { 
                                0: 0.5,
                                1: 0.5,
                                2: 0.5,
                                3: 0.5,
                                4: 0.5,
                                5: 0.5,
                                6: 0.5,
                                7: 0.5,
                                8: 0.5,
                                9: 0.5,
                                10: 0.5,
                                11: 0.5,
                                12: 0.5,                               
                                13: 0.5,
                                14: 0.5,
                                15: 0.5,
                                16: 0.5,
                                17: 0.5,
                                18: 0.5,
                                19: 0.5,
                                20: 0.5,
                                21: 0.5,
                                22: 0.5,
                                23: 0.5,
                                24: 0.5,
                                25: 0.5,                                
                                26: 0.5,
                                27: 0.5,
                                28: 0.5,
                                29: 0.5,
                                30: 0.5,
                                31: 0.5,
                                32: 0.5,
                                33: 0.5,
                                34: 0.5,
                                35: 0.5,
                             
                            }  
                },
                48: {
                    img: 48,
                    name: "Винилы",
                    submenu: {},
                    price: { 
                                0: 3,
                                1: 4,
                                2: 6,
                                3: 5,
                                4: 4,
                                5: 3,
                                6: 3,
                                7: 6,
                                8: 7,
                                9: 5,
                                10: 6,
                                11: 4,
                                12: 6,                               
                                13: 3,
                                14: 4,
                                15: 6,
                                16: 5,
                                17: 4,
                                18: 3,
                                19: 3,
                                20: 6,
                                21: 7,
                                22: 5,
                                23: 6,
                                24: 4,
                                25: 6,                                
                                26: 3,
                                27: 4,
                                28: 6,
                                29: 5,
                                30: 4,
                                31: 3,
                                32: 3,
                                33: 6,
                                34: 7,
                                35: 5,
                                36: 6,
                                37: 4,
                                38: 6,                                
                                39: 3,
                                40: 4,
                                41: 6,
                                42: 5,
                                43: 4,
                                44: 3,
                                45: 3,
                                46: 6,
                                47: 7,
                                48: 5,
                                49: 6,
                                50: 4,
                                51: 6,                                
                                52: 3,
                                53: 4,
                                54: 6,
                                55: 5,
                                56: 4,
                                57: 3,
                                58: 3,
                                59: 6,
                                60: 7,
                                61: 5,
                                62: 6,
                                63: 4,
                                64: 6,                                
                                65: 3,
                                66: 4,
                                67: 6,
                                68: 5,
                                69: 4,
                                70: 3,
                                71: 3,
                                72: 6,
                                73: 7,
                                74: 5,
                                75: 6,
                                76: 4,
                                77: 6,                                
                                78: 3,
                                79: 4,
                                80: 6,
                                81: 5,
                                82: 4,
                                83: 3,
                                84: 3,
                                85: 6,
                                86: 7,
                                87: 5,
                                88: 6,
                                89: 4,
                                90: 6,                                
                                91: 3,
                                92: 4,
                                93: 6,
                                94: 5,
                                95: 4,
                                96: 3,
                                97: 3,
                                98: 6,
                                99: 7,
                                100: 5
                            }  
                },
                15: {
                    img: 5,
                    name: "Подвеска",
                    submenu: {},
                    price: { 
                                0: 0.4,
                                1: 0.5,
                                2: 0.6,
                                3: 0.7,
                                4: 4,
                                5: 3,
                                6: 3,
                                7: 6,
                                8: 7,
                                9: 5,
                                10: 6,
                                11: 4,
                                12: 6,
                            }  
                },
                16: {
                    img: 2,
                    name: "Броня",
                    submenu: {},
                    price: { 
                                0: 2,
                                1: 3,
                                2: 4,
                                3: 5,
                                4: 6.5,
                                5: 3,
                                6: 3,
                                7: 6,
                                8: 7,
                                9: 5,
                                10: 6,
                                11: 4,
                                12: 6,
                            }  
                },
                18: {
                    img: 2,
                    name: "Турбо",
                    submenu: {},
                    price: { 
                                0: 10,
                            }  
                },
                // 21: {
                //     img: 2,
                //     name: "21",
                //     submenu: {},
                //     price: { 
                //                 0: 3,
                //                 1: 4,
                //                 2: 6,
                //                 3: 5,
                //                 4: 4,
                //                 5: 3,
                //                 6: 3,
                //                 7: 6,
                //                 8: 7,
                //                 9: 5,
                //                 10: 6,
                //                 11: 4,
                //                 12: 6,
                //             }  
                // },
                // 50: {
                //     img: 2,
                //     name: "50",
                //     submenu: {},
                //     price: { 
                //                 0: 3,
                //                 1: 4,
                //                 2: 6,
                //                 3: 5,
                //                 4: 4,
                //                 5: 3,
                //                 6: 3,
                //                 7: 6,
                //                 8: 7,
                //                 9: 5,
                //                 10: 6,
                //                 11: 4,
                //                 12: 6,
                //             }  
                // },
                // 62: {
                //     img: 2,
                //     name: "62",
                //     submenu: {},
                //     price: { 
                //                 0: 3,
                //                 1: 4,
                //                 2: 6,
                //                 3: 5,
                //                 4: 4,
                //                 5: 3,
                //                 6: 3,
                //                 7: 6,
                //                 8: 7,
                //                 9: 5,
                //                 10: 6,
                //                 11: 4,
                //                 12: 6,
                //             }  
                // },
                // 25: {
                //     img: 17,
                //     name: "Номера",
                //     submenu: {},
                //     price: { 
                //                 0: 3,
                //                 1: 4,
                //                 2: 6,
                //                 3: 5,
                //                 4: 4,
                //                 5: 3,
                //                 6: 3,
                //                 7: 6,
                //                 8: 7,
                //                 9: 5,
                //                 10: 6,
                //                 11: 4,
                //                 12: 6,
                //             }  
                // },
                // 55: {
                //     img: 9,
                //     name: "Оттенок",
                //     submenu: {},
                //     price: { 
                //                 0: 3,
                //                 1: 4,
                //                 2: 6,
                //                 3: 5,
                //                 4: 4,
                //                 5: 3,
                //                 6: 3,
                //                 7: 6,
                //                 8: 7,
                //                 9: 5,
                //                 10: 6,
                //                 11: 4,
                //                 12: 6,
                //             }  
                // },
                56: {
                    img: 9,
                    name: "Тонировка",
                    submenu: {},
                    price: { 
                                0: 1,
                                1: 1,
                                2: 1,
                                3: 1,
                                4: 4,
                                5: 3,
                                6: 3,
                                7: 6,
                                8: 7,
                                9: 5,
                                10: 6,
                                11: 4,
                                12: 6,
                            }  
                }
            },
            click: true,
            braking: 60,
            clutch: 50,
            vehiclePrice:100000,
            submenu_index: 0,
            submenu1_index: 0,
            submenu2_index: 0,
            turn: 0,
            height: 0
        },
        watch: {
            turn(val) {
                return mp.trigger("turnChange_castom", parseFloat(val));
            },
            height(val) {
                return mp.trigger("heightChange_castom", parseFloat(val));
            },
            colorValue: function(val) {
                mp.trigger('setColorTuning', this.mod, val);
                console.log(`mp.trigger('setColorTuning',${this.mod}, ${val});`)
            }
        },
        mounted: () => {
            var colorPicker = new iro.ColorPicker("#demoWheel", {
                width: 290,
                height: 360,
                handleRadius: 8,
                activeHandleRadius: 10,
                handleUrl: null,
                sortTun: null,
                // handleUrl: "#test",
                handleOrigin: { y: 0, x: 0 },
                colors: [
                    '#fff',
                ],
                borderWidth: 2,
                borderColor: 'black',
                padding: 8,
                priceMod: 8,
                wheelLightness: true,
                layoutDirection: 'vertical',
                // transparency: true,
                layout: [{
                        component: iro.ui.Wheel,
                        options: {
                            wheelDirection: 'anticlockwise',
                            wheelAngle: 0,
                        }
                    },
                    {
                        component: iro.ui.Slider,
                        options: {
                            sliderType: 'hue'
                        }
                    },
                    {
                        component: iro.ui.Slider,
                        options: {
                            sliderType: 'value'
                        }
                    },


                ]
            });

            // colorPicker.on('mount', function() {
            //   console.log('mount')
            // });

            colorPicker.on('color:change', function() {})

            colorPicker.on('input:change', function(color) {
                tuning.colorValue = color.hexString;
            })

            colorPicker.on('input:start', function(color) {})

            colorPicker.on('input:move', function(color) {})

            colorPicker.on('input:end', function(color) {})

            // colorPicker.on(['color:init', 'color:change'], function() {
            //   console.log('color:change or color:init');
            // })
        },
        computed: {
            getTun: function() {
                let res = {}
                if (!this.selectTun.submenu) return [];
                let keys = Object.keys(this.selectTun.submenu);
                for (var i = 0; i < keys.length; i++) {
                    if (keys == 1) {
                        if (this.selectTun.submenu[1].submenu[1].length == 0 || this.selectTun.submenu[1].submenu[2].length == 0) continue;
                    }
                    if (!this.selectTun.submenu[keys[i]].submenu)
                        if (this.selectTun.submenu[keys[i]].name) {
                            res[keys[i]] = this.selectTun.submenu[keys[i]];
                            continue;
                        } else continue;
                    if(Object.keys(this.selectTun.submenu[keys[i]].submenu).length>0)res[keys[i]] = this.selectTun.submenu[keys[i]];

                }
                return res;
            }
        },
        methods: {
            show: function(bool) {
                this.active = bool;
            },
            hide: function(bool) {
                this.active = bool;
            },
            exit: function() {
                mp.trigger("exitTun")
                this.active = false;
            },
            mouseClick(bool) {
                this.click = bool;
            },
            mousemove(x, y) {
                // min: 46,
                // max: 406,
                if (this.click) {

                    console.log(this.turn + (this.xold - x));
                    this.turn -= (this.xold - x) / 3;
                    this.xold = x;
                    console.log(this.height + (this.yold - y));
                    if (this.height - (this.yold - y) / 800 < 0.8 && this.height - (this.yold - y) / 800 > -0.8) {
                        this.height -= (this.yold - y) / 800;
                        this.yold = y;
                    } else if (this.height - (this.yold - y) / 800 >= 0.8) {
                        this.height = 0.8;
                        this.yold = y;
                    } else if (this.height + (this.yold - y) / 800 <= -0.8) {
                        this.height = -0.8;
                        this.yold = y;
                    }
                } else {
                    this.xold = x;
                    this.yold = y;
                }
            },
            setModData: function(data) {
                console.log(data)
                this.colorPicker = false;
                let keys = Object.keys(data);
                console.log(keys);
                this.sortTun = {};
                for (var i = 0; i < keys.length; i++) {
                    this.sortTun[keys[i]]=this.tuningMenu[keys[i]]
                    if(keys[i]=='color')continue;
                    if (keys[i] == 1 || keys[i] == 2) {
                        for (var j = 0; j < data[keys[i]].length; j++) {
                            if (!this.sortTun[1].submenu[keys[i]]) {
                                this.sortTun[1].submenu[keys[i]] = {}
                                this.sortTun[1].submenu[keys[i]].submenu = {}
                            }

                            this.sortTun[1].submenu[keys[i]].submenu[j] = {}
                            this.sortTun[1].submenu[keys[i]].submenu[j].name = 'Бампер ' + j;
                        }
                    } else {
                        for (var j = 0; j < data[keys[i]].length; j++) {
                            if (!this.sortTun[keys[i]]) continue;
                            if (!this.sortTun[keys[i]].submenu) this.sortTun[keys[i]].submenu = {};
                            console.log(`this.tuningMenu[${keys[i]}].submenu[${j}]`)
                            this.sortTun[keys[i]].submenu[j] = {}
                            this.sortTun[keys[i]].submenu[j].name = this.sortTun[keys[i]].name + ' ' + j;
                            this.sortTun[keys[i]].submenu[j].price = this.sortTun[keys[i]].price;
                            
                        }
                    }
                    console.log(`this.tuningMenu[${keys[i]}].submenu[${j}]`)
                }
                console.log(this.sortTun);
                this.selectTun = {};
                this.selectTun.submenu = JSON.parse(JSON.stringify(this.sortTun));
                console.log(this.selectTun.submenu);
                this.selectTun.submenu[56] = {}
                this.selectTun.submenu[56].name = "Тонировка";
                this.selectTun.submenu[56].img = 9;
                this.selectTun.submenu[56].submenu = { 
                    0: {price:{0:1}, name: '10%' }, 
                    1: {price:{1:2}, name: '90%' }, 
                    2: {price:{2:3}, name: '50%' }, 
                    3: {price:{3:5}, name: '30%' } 
                };
                this.selectTun.submenu[23] = {}
                this.selectTun.submenu[23].name = "Колеса";
                this.selectTun.submenu[23].img = 7;
                this.selectTun.submenu[23].submenu = { 
                    0: {name: 'Sport'}, 
                    1: {name: 'Muscle' }, 
                    2: {name: 'Lowrider' }, 
                    3: {name: 'SUV' }, 
                    4: {name: 'Offroad' }, 
                    5: {name: 'Tuner' }, 
                    6: {name: 'Bike Wheels' }, 
                    7: {name: 'High End' } 
                };
                this.selectTun.submenu[60] = {};
                this.selectTun.submenu[60].name = "Неон";
                this.selectTun.submenu[60].img = 6;
                this.selectTun.submenu[60].submenu = {
                    'color': {
                        price:{
                            'color':10
                        },
                        name: 'цвет',
                        type: 'neon'
                    }
                }
                this.selectTun.submenu[18] = {};
                this.selectTun.submenu[18].name = "Турбо";
                this.selectTun.submenu[18].img = 2;
                this.selectTun.submenu[18].submenu = { 
                    0: {price:{0:20}, name: 'Установить' }
                }
                this.selectTun.submenu[57] = {}
                this.selectTun.submenu[57].name = "Покраска";
                this.selectTun.submenu[57].img = 6;
                this.selectTun.submenu[57].submenu = {
                    58: {
                        name: 'Основной цвет',
                        submenu: {
                            'color': {
                                price:{
                                    'color':5
                                },
                                name: 'цвет',
                                type: 'primary'
                            }
                        }
                    },
                    59: {
                        name: 'Вторичный цвет',
                        submenu: {
                            'color': {
                                price:{
                                    'color':3
                                },
                                name: 'цвет',
                                type: 'secondary'
                            }
                        }
                    }
                };
                // this.selectTun.submenu[25] = {};
                // this.selectTun.submenu[25].name = "Покраска";
                // this.selectTun.submenu[25].img = 17;
                // this.selectTun.submenu[25].submenu = {
                //     0: { name: 'Стандарт' },
                //     1: { name: '1' },
                //     2: { name: '2' },
                //     3: { name: '3' },
                //     4: { name: '4' },
                //     5: { name: '5' },
                //     6: { name: '6' },
                //     7: { name: '7' },
                //     8: { name: '8' },
                //     9: { name: '9' },
                //     10: { name: '10' },
                //     11: { name: '11' },
                //     12: { name: '12' },
                //     13: { name: '13' },
                //     14: { name: '14' },
                //     15: { name: '15' }
                // };
                console.log(this.selectTun.submenu);
                this.active = true;
            },
            submenu: function(i) {},
            setSelectTun: function(item, i) {
                this.colorPicker = false;
                this.selectTun = item;
                this.mod = i;
                if(this.sets[i] > -1){
                    this.modIndex = sets[i];
                }
                else {
                     this.modIndex = -2;
                }
            },
            setComp: function(comps){
                this.sets = JSON.parse(comps);
            },
            setBuyComp: function(id, comp){
                this.sets[id] = comp;
            },
            selectModIndex: function(i,price = false) {
                if(this.mod==23){
                    this.wheelType = i
                    return mp.trigger("getWhellType",i)
                }                
                if (i == 'color'){
                    this.modIndex = 57;
                    return this.colorPicker = true;}
                else this.colorPicker = false;
                this.modIndex = i;
                this.priceMod = Math.round(price/100*this.vehiclePrice);
                if(this.mod==24){
                    console.log(`mp.trigger("setMods",${this.mod},${this.modIndex}, ${this.wheelType})`)
                    return mp.trigger("setMods", this.mod, this.modIndex, this.wheelType)
                }
                mp.trigger("setMods", this.mod, this.modIndex)
                console.log(`mp.trigger("setMods",${this.mod},${this.modIndex})`)
            },
            buy: function() {
                if(parseInt(this.mod)==57)return mp.trigger('buy-tuning', this.mod, this.colorValue, this.priceMod);
                if(parseInt(this.mod)==58)return mp.trigger('buy-tuning', this.mod, this.colorValue, this.priceMod);
                if(parseInt(this.mod)==59)return mp.trigger('buy-tuning', this.mod, this.colorValue, this.priceMod);
                if(parseInt(this.mod)==60)return mp.trigger('buy-tuning', this.mod, this.colorValue, this.priceMod);
                else mp.trigger('buy-tuning', this.mod, this.modIndex, this.priceMod);
            },
            set: function(args) {
                console.log(args)
            },
            select: function(i, e) {
                this.submenu1_index = i;
                if (typeof this.items[this.submenu_index].submenu[i].submenu !== "undefined") {
                    $(this.$el).find(".submenu").hide();
                    $(this.$el).find(".submenu2").show();
                } else {
                    $(this.$el).find(".submenu .active").removeClass("active");
                    $(e.target).addClass("active");
                }

            },
            select_podveska: function(i, e) {
                this.submenu1_index = i;
                $(this.$el).find(".submenu .active").removeClass("active");
                $(e.target).addClass("active");
            },
            select2: function(i, e) {
                this.submenu2_index = i;
                $(this.$el).find(".submenu2 .active").removeClass("active");
                $(e.target).addClass("active");
            },
            back: function() {
                this.colorPicker = false;
                this.selectTun.submenu = JSON.parse(JSON.stringify(this.sortTun));

                this.selectTun.submenu[56] = {}
                this.selectTun.submenu[56].name = "Тонировка";
                this.selectTun.submenu[56].img = 9;
                this.selectTun.submenu[56].submenu = { 0: {price:{
                                    0:1
                                }, name: '10%' }, 1: {price:{
                                    1:2
                                }, name: '90%' }, 2: {price:{
                                    2:3
                                }, name: '50%' }, 3: {price:{
                                    3:5
                                }, name: '30%' } 
                };
                this.selectTun.submenu[23] = {}
                this.selectTun.submenu[23].name = "Колеса";
                this.selectTun.submenu[23].img = 7;
                this.selectTun.submenu[23].submenu = { 
                    0: {name: 'Sport'}, 
                    1: {name: 'Muscle' }, 
                    2: {name: 'Lowrider' }, 
                    3: {name: 'SUV' }, 
                    4: {name: 'Offroad' }, 
                    5: {name: 'Tuner' }, 
                    6: {name: 'Bike Wheels' }, 
                    7: {name: 'High End' } 
                };
                this.selectTun.submenu[60] = {};
                this.selectTun.submenu[60].name = "Неон";
                this.selectTun.submenu[60].img = 6;
                this.selectTun.submenu[60].submenu = {
                    'color': {
                        price:{
                            'color':10
                        },
                        name: 'цвет',
                        type: 'neon'
                    }
                }
                this.selectTun.submenu[18] = {};
                this.selectTun.submenu[18].name = "Турбо";
                this.selectTun.submenu[18].img = 2;
                this.selectTun.submenu[18].submenu = { 
                    0: {price:{0:20}, name: 'Установить' }
                }
                this.selectTun.submenu[57] = {}
                this.selectTun.submenu[57].name = "Покраска";
                this.selectTun.submenu[57].img = 6;
                this.selectTun.submenu[57].submenu = {
                    58: {
                        name: 'Основной',
                        submenu: {
                            'color': {
                                price:{
                                    'color':5
                                },
                                name: 'цвет',
                                type: 'primary'
                            }
                        }
                    },
                    59: {
                        name: 'Вторичный',
                        submenu: {
                            'color': {
                                price:{
                                    'color':3
                                },
                                name: 'цвет',
                                type: 'secondary'
                            }
                        }
                    }
                };
                this.modIndex = -2;
                this.active = true;
            },
            back2: function() {
                $(this.$el).find(".submenu").show();
                $(this.$el).find(".submenu2").hide();
            }
        }
    });
    </script>
</body>

</html>